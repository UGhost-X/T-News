<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智能新闻聚合 - FreeRSS + AI摘要</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        :root {
            --primary-color: #2563eb;
            --secondary-color: #7c3aed;
            --accent-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --light-color: #f8fafc;
            --dark-color: #1e293b;
            --gray-color: #64748b;
            --border-color: #e2e8f0;
            --card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        body {
            background-color: #f1f5f9;
            color: var(--dark-color);
            line-height: 1.6;
        }
        
        .container {
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            min-height: 100vh;
            max-width: 1800px;
            margin: 0 auto;
            gap: 0;
        }
        
        /* 左侧边栏 - RSS源管理 */
        .sidebar {
            background-color: white;
            border-right: 1px solid var(--border-color);
            padding: 20px 0;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto;
        }
        
        .logo-area {
            padding: 0 20px 20px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-size: 22px;
            font-weight: 700;
            color: var(--primary-color);
        }
        
        .logo i {
            margin-right: 10px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 26px;
        }
        
        .logo-tag {
            font-size: 12px;
            background: linear-gradient(135deg, var(--accent-color), var(--warning-color));
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            margin-left: 8px;
            font-weight: 500;
        }
        
        .ai-badge {
            display: inline-flex;
            align-items: center;
            background-color: #f0f9ff;
            color: var(--primary-color);
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 20px;
            margin-top: 5px;
        }
        
        .ai-badge i {
            margin-right: 5px;
            font-size: 12px;
        }
        
        .sidebar-section {
            padding: 0 20px;
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 14px;
            text-transform: uppercase;
            color: var(--gray-color);
            letter-spacing: 1px;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .rss-source-list {
            list-style-type: none;
        }
        
        .rss-source-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            margin: 5px 0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 3px solid transparent;
        }
        
        .rss-source-item:hover {
            background-color: #f8fafc;
        }
        
        .rss-source-item.active {
            background-color: #f0f9ff;
            border-left: 3px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .source-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            color: white;
            font-size: 14px;
            font-weight: 600;
        }
        
        .source-name {
            font-size: 15px;
            flex-grow: 1;
        }
        
        .source-count {
            background-color: var(--border-color);
            color: var(--gray-color);
            font-size: 11px;
            padding: 2px 8px;
            border-radius: 20px;
        }
        
        .add-source-btn {
            width: 100%;
            padding: 12px;
            background-color: #f8fafc;
            border: 1px dashed var(--border-color);
            border-radius: 8px;
            color: var(--gray-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 10px;
        }
        
        .add-source-btn:hover {
            background-color: #f1f5f9;
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .add-source-btn i {
            margin-right: 8px;
        }
        
        /* 主要内容区 */
        .main-content {
            padding: 20px 30px;
            overflow-y: auto;
            max-height: 100vh;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }
        
        .page-title {
            font-size: 26px;
            color: var(--dark-color);
        }
        
        .ai-features {
            display: flex;
            gap: 10px;
        }
        
        .ai-btn {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .ai-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }
        
        .ai-btn i {
            margin-right: 8px;
        }
        
        .ai-btn.secondary {
            background: white;
            color: var(--primary-color);
            border: 1px solid var(--border-color);
        }
        
        .filter-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-tab {
            padding: 8px 16px;
            background-color: white;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-tab:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .filter-tab.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* 新闻卡片 */
        .news-grid {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .news-card {
            background-color: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .news-card:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-hover);
        }
        
        .news-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 20px 20px 10px;
        }
        
        .news-source-info {
            display: flex;
            align-items: center;
        }
        
        .news-source-logo {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            color: white;
            font-weight: 600;
            font-size: 16px;
        }
        
        .news-source-name {
            font-weight: 600;
            font-size: 15px;
        }
        
        .news-source-time {
            font-size: 13px;
            color: var(--gray-color);
            margin-top: 2px;
        }
        
        .ai-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .ai-tag {
            font-size: 11px;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 500;
        }
        
        .ai-tag.category {
            background-color: #f0f9ff;
            color: var(--primary-color);
        }
        
        .ai-tag.sentiment {
            background-color: #f0fdf4;
            color: var(--accent-color);
        }
        
        .ai-tag.importance {
            background-color: #fef3c7;
            color: var(--warning-color);
        }
        
        .news-card-content {
            padding: 0 20px 15px;
        }
        
        .news-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 12px;
            line-height: 1.4;
            color: var(--dark-color);
        }
        
        .news-original-content {
            color: var(--gray-color);
            font-size: 15px;
            margin-bottom: 15px;
            line-height: 1.6;
            max-height: 80px;
            overflow: hidden;
            position: relative;
        }
        
        .news-original-content::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            width: 30%;
            height: 24px;
            background: linear-gradient(to right, rgba(255,255,255,0), rgba(255,255,255,1) 70%);
        }
        
        .ai-summary-box {
            background-color: #f8fafc;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid var(--primary-color);
        }
        
        .ai-summary-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            color: var(--primary-color);
            font-weight: 600;
            font-size: 14px;
        }
        
        .ai-summary-header i {
            margin-right: 8px;
        }
        
        .ai-summary-text {
            font-size: 15px;
            line-height: 1.6;
        }
        
        .news-card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: #f8fafc;
            border-top: 1px solid var(--border-color);
        }
        
        .news-actions {
            display: flex;
            gap: 15px;
        }
        
        .news-action {
            display: flex;
            align-items: center;
            color: var(--gray-color);
            font-size: 14px;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        
        .news-action:hover {
            color: var(--primary-color);
        }
        
        .news-action i {
            margin-right: 5px;
        }
        
        .similar-sources {
            font-size: 13px;
            color: var(--gray-color);
        }
        
        .similar-sources span {
            color: var(--primary-color);
            font-weight: 500;
            cursor: pointer;
        }
        
        /* 右侧边栏 - AI功能 */
        .right-sidebar {
            background-color: white;
            border-left: 1px solid var(--border-color);
            padding: 20px;
            overflow-y: auto;
            max-height: 100vh;
        }
        
        .ai-control-panel {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }
        
        .ai-control-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
        }
        
        .ai-control-title i {
            margin-right: 10px;
        }
        
        .ai-control-item {
            margin-bottom: 15px;
        }
        
        .ai-control-label {
            display: block;
            font-size: 14px;
            margin-bottom: 8px;
            color: var(--dark-color);
            font-weight: 500;
        }
        
        .ai-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background-color: #cbd5e1;
            outline: none;
            -webkit-appearance: none;
        }
        
        .ai-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background-color: var(--primary-color);
            cursor: pointer;
        }
        
        .ai-value-display {
            text-align: right;
            font-size: 13px;
            color: var(--gray-color);
            margin-top: 5px;
        }
        
        .trending-topics {
            margin-top: 30px;
        }
        
        .trending-list {
            list-style-type: none;
        }
        
        .trending-item {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: flex-start;
        }
        
        .trending-item:last-child {
            border-bottom: none;
        }
        
        .trending-rank {
            font-size: 22px;
            font-weight: 800;
            color: #cbd5e1;
            margin-right: 15px;
            min-width: 30px;
        }
        
        .trending-item:nth-child(1) .trending-rank {
            color: #f59e0b;
        }
        
        .trending-item:nth-child(2) .trending-rank {
            color: #64748b;
        }
        
        .trending-item:nth-child(3) .trending-rank {
            color: #10b981;
        }
        
        .trending-content h4 {
            font-size: 15px;
            margin-bottom: 5px;
            line-height: 1.4;
        }
        
        .trending-meta {
            font-size: 12px;
            color: var(--gray-color);
            display: flex;
            align-items: center;
        }
        
        .trending-meta i {
            margin-right: 5px;
        }
        
        .rss-manager {
            margin-top: 30px;
            background-color: #f8fafc;
            border-radius: 12px;
            padding: 20px;
        }
        
        .rss-input-group {
            display: flex;
            margin-bottom: 15px;
        }
        
        .rss-input {
            flex-grow: 1;
            padding: 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px 0 0 8px;
            font-size: 14px;
            outline: none;
        }
        
        .rss-input:focus {
            border-color: var(--primary-color);
        }
        
        .rss-add-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0 20px;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            font-weight: 500;
        }
        
        .rss-add-btn:hover {
            background-color: #1d4ed8;
        }
        
        /* 加载动画 */
        .loading-spinner {
            display: none;
            text-align: center;
            padding: 40px;
        }
        
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top-color: var(--primary-color);
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 15px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* 响应式设计 */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 250px 1fr;
            }
            
            .right-sidebar {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                display: none;
            }
            
            .main-content {
                padding: 15px;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .ai-features {
                margin-top: 15px;
                width: 100%;
                justify-content: space-between;
            }
            
            .ai-btn {
                flex-grow: 1;
                justify-content: center;
            }
        }
        
        /* 动画效果 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        /* 模态框 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--gray-color);
        }
        
        .modal-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--dark-color);
        }
        
        .rss-source-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .rss-source-option {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .rss-source-option:hover {
            border-color: var(--primary-color);
            box-shadow: var(--card-shadow);
        }
        
        .rss-source-option i {
            font-size: 24px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .rss-source-option h4 {
            font-size: 16px;
            margin-bottom: 5px;
        }
        
        .rss-source-option p {
            font-size: 12px;
            color: var(--gray-color);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 左侧边栏 - RSS源管理 -->
        <div class="sidebar">
            <div class="logo-area">
                <div class="logo">
                    <i class="fas fa-brain"></i>
                    智能新闻聚合
                    <span class="logo-tag">FreeRSS + AI</span>
                </div>
                <div class="ai-badge">
                    <i class="fas fa-robot"></i>
                    实时AI摘要与分析
                </div>
            </div>
            
            <div class="sidebar-section">
                <div class="section-title">新闻源管理</div>
                <ul class="rss-source-list" id="rssSourceList">
                    <!-- RSS源将通过JavaScript动态生成 -->
                </ul>
                <div class="add-source-btn" id="addSourceBtn">
                    <i class="fas fa-plus"></i>
                    添加RSS源
                </div>
            </div>
            
            <div class="sidebar-section">
                <div class="section-title">AI分类筛选</div>
                <ul class="rss-source-list">
                    <li class="rss-source-item" data-filter="all">
                        <div class="source-icon" style="background-color: #6366f1;">
                            <i class="fas fa-globe"></i>
                        </div>
                        <span class="source-name">全部新闻</span>
                        <span class="source-count" id="allCount">0</span>
                    </li>
                    <li class="rss-source-item" data-filter="ai-highlight">
                        <div class="source-icon" style="background-color: #10b981;">
                            <i class="fas fa-star"></i>
                        </div>
                        <span class="source-name">AI重点推荐</span>
                        <span class="source-count" id="highlightCount">0</span>
                    </li>
                    <li class="rss-source-item" data-filter="ai-summary">
                        <div class="source-icon" style="background-color: #f59e0b;">
                            <i class="fas fa-robot"></i>
                        </div>
                        <span class="source-name">已生成摘要</span>
                        <span class="source-count" id="summaryCount">0</span>
                    </li>
                </ul>
            </div>
            
            <div class="sidebar-section">
                <div class="section-title">AI检测标签</div>
                <div class="ai-tags" style="padding: 0 5px;">
                    <span class="ai-tag category">科技动态</span>
                    <span class="ai-tag category">财经要闻</span>
                    <span class="ai-tag sentiment">积极情绪</span>
                    <span class="ai-tag importance">高重要性</span>
                    <span class="ai-tag category">国际新闻</span>
                    <span class="ai-tag sentiment">争议话题</span>
                </div>
            </div>
        </div>
        
        <!-- 主要内容区 -->
        <div class="main-content">
            <div class="header">
                <div>
                    <h1 class="page-title" id="currentSourceTitle">全部新闻聚合</h1>
                    <p style="color: var(--gray-color); font-size: 14px; margin-top: 5px;">
                        <span id="newsStats">正在加载...</span>
                        <span id="aiStats" style="margin-left: 15px; color: var(--primary-color);">AI处理中...</span>
                    </p>
                </div>
                <div class="ai-features">
                    <button class="ai-btn" id="generateSummaryBtn">
                        <i class="fas fa-robot"></i>
                        生成AI摘要
                    </button>
                    <button class="ai-btn secondary" id="refreshNewsBtn">
                        <i class="fas fa-sync-alt"></i>
                        刷新新闻
                    </button>
                </div>
            </div>
            
            <div class="filter-tabs" id="filterTabs">
                <div class="filter-tab active" data-category="all">全部</div>
                <div class="filter-tab" data-category="tech">科技</div>
                <div class="filter-tab" data-category="finance">财经</div>
                <div class="filter-tab" data-category="politics">时政</div>
                <div class="filter-tab" data-category="sports">体育</div>
                <div class="filter-tab" data-category="entertainment">娱乐</div>
            </div>
            
            <div class="loading-spinner" id="loadingSpinner">
                <div class="spinner"></div>
                <p>AI正在处理新闻内容...</p>
            </div>
            
            <div class="news-grid" id="newsGrid">
                <!-- 新闻卡片将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <!-- 右侧边栏 - AI控制面板 -->
        <div class="right-sidebar">
            <div class="ai-control-panel">
                <div class="ai-control-title">
                    <i class="fas fa-sliders-h"></i>
                    AI摘要设置
                </div>
                
                <div class="ai-control-item">
                    <label class="ai-control-label">摘要长度</label>
                    <input type="range" min="1" max="10" value="5" class="ai-slider" id="summaryLengthSlider">
                    <div class="ai-value-display">
                        <span id="summaryLengthValue">中等 (5/10)</span>
                    </div>
                </div>
                
                <div class="ai-control-item">
                    <label class="ai-control-label">情感分析敏感度</label>
                    <input type="range" min="1" max="10" value="7" class="ai-slider" id="sentimentSlider">
                    <div class="ai-value-display">
                        <span id="sentimentValue">高敏感度 (7/10)</span>
                    </div>
                </div>
                
                <div class="ai-control-item">
                    <label class="ai-control-label">新闻重要性阈值</label>
                    <input type="range" min="1" max="10" value="6" class="ai-slider" id="importanceSlider">
                    <div class="ai-value-display">
                        <span id="importanceValue">较高 (6/10)</span>
                    </div>
                </div>
                
                <button class="ai-btn" style="width: 100%; margin-top: 15px;" id="applyAiSettings">
                    <i class="fas fa-cog"></i>
                    应用AI设置
                </button>
            </div>
            
            <div class="trending-topics">
                <div class="ai-control-title">
                    <i class="fas fa-fire"></i>
                    AI检测热点
                </div>
                
                <ul class="trending-list" id="trendingList">
                    <!-- 热点趋势将通过JavaScript动态生成 -->
                </ul>
            </div>
            
            <div class="rss-manager">
                <div class="ai-control-title">
                    <i class="fas fa-rss"></i>
                    添加RSS源
                </div>
                
                <div class="rss-input-group">
                    <input type="text" class="rss-input" id="rssUrlInput" placeholder="输入RSS源URL">
                    <button class="rss-add-btn" id="rssUrlAddBtn">添加</button>
                </div>
                
                <p style="font-size: 13px; color: var(--gray-color); margin-top: 10px;">
                    支持标准RSS/Atom格式，AI会自动分析内容并分类
                </p>
            </div>
        </div>
    </div>
    
    <!-- 添加RSS源模态框 -->
    <div class="modal" id="addRssModal">
        <div class="modal-content">
            <button class="modal-close" id="closeModalBtn">&times;</button>
            <h2 class="modal-title">添加新闻源</h2>
            <p style="margin-bottom: 20px; color: var(--gray-color);">选择预设新闻源或输入自定义RSS地址</p>
            
            <div class="rss-source-grid">
                <div class="rss-source-option" data-source="bbc">
                    <i class="fas fa-globe-europe"></i>
                    <h4>BBC新闻</h4>
                    <p>国际新闻</p>
                </div>
                
                <div class="rss-source-option" data-source="reuters">
                    <i class="fas fa-newspaper"></i>
                    <h4>路透社</h4>
                    <p>财经新闻</p>
                </div>
                
                <div class="rss-source-option" data-source="techcrunch">
                    <i class="fas fa-microchip"></i>
                    <h4>TechCrunch</h4>
                    <p>科技新闻</p>
                </div>
                
                <div class="rss-source-option" data-source="nytimes">
                    <i class="fas fa-landmark"></i>
                    <h4>纽约时报</h4>
                    <p>综合新闻</p>
                </div>
                
                <div class="rss-source-option" data-source="custom">
                    <i class="fas fa-plus-circle"></i>
                    <h4>自定义源</h4>
                    <p>输入RSS URL</p>
                </div>
            </div>
            
            <div id="customRssInput" style="display: none; margin-top: 20px;">
                <input type="text" class="rss-input" id="customRssUrl" placeholder="https://example.com/rss.xml" style="width: 100%; border-radius: 8px;">
                <button class="ai-btn" style="width: 100%; margin-top: 10px;" id="addCustomRssBtn">
                    添加自定义源
                </button>
            </div>
        </div>
    </div>

    <script>
        // 新闻数据模拟 - 结合FreeRSS和大模型处理
        const rssSources = [
            {
                id: 'bbc',
                name: 'BBC新闻',
                url: 'http://feeds.bbci.co.uk/news/rss.xml',
                category: 'international',
                color: '#FF5733',
                icon: 'globe-europe',
                enabled: true,
                lastUpdated: '2023-10-15 09:30'
            },
            {
                id: 'reuters',
                name: '路透社',
                url: 'http://feeds.reuters.com/reuters/topNews',
                category: 'finance',
                color: '#3498db',
                icon: 'newspaper',
                enabled: true,
                lastUpdated: '2023-10-15 10:15'
            },
            {
                id: 'techcrunch',
                name: 'TechCrunch',
                url: 'http://feeds.feedburner.com/TechCrunch/',
                category: 'tech',
                color: '#e74c3c',
                icon: 'microchip',
                enabled: true,
                lastUpdated: '2023-10-15 08:45'
            },
            {
                id: 'nytimes',
                name: '纽约时报',
                url: 'https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml',
                category: 'general',
                color: '#2c3e50',
                icon: 'landmark',
                enabled: true,
                lastUpdated: '2023-10-15 11:20'
            },
            {
                id: 'guardian',
                name: '卫报',
                url: 'https://www.theguardian.com/world/rss',
                category: 'international',
                color: '#14284B',
                icon: 'shield-alt',
                enabled: false,
                lastUpdated: '2023-10-14 16:30'
            }
        ];

        // 模拟从FreeRSS获取的新闻数据 + AI处理结果
        const newsData = [
            {
                id: 1,
                title: "OpenAI发布新一代AI模型，性能提升40%",
                source: "TechCrunch",
                sourceId: "techcrunch",
                originalContent: "OpenAI today announced its latest AI model, which the company says is 40% more powerful than its predecessor. The new model demonstrates significant improvements in reasoning capabilities and can handle more complex instructions. According to OpenAI, the model has been trained on a dataset that is five times larger than before, encompassing a wider range of topics and languages.",
                aiSummary: "OpenAI发布新一代AI模型，性能比前代提升40%。新模型在推理能力和处理复杂指令方面有显著改进，训练数据量是之前的5倍，涵盖更广泛的主题和语言。",
                time: "2小时前",
                category: "tech",
                sentiment: "positive",
                importance: 9,
                aiProcessed: true,
                aiHighlight: true,
                similarSources: ["BBC", "Reuters"],
                tags: ["AI突破", "技术发展", "创新"]
            },
            {
                id: 2,
                title: "美联储维持利率不变，市场反应平淡",
                source: "路透社",
                sourceId: "reuters",
                originalContent: "The Federal Reserve held interest rates steady on Wednesday and signaled that it may keep them higher for longer as policymakers continue to fight inflation. The decision was widely expected by financial markets, which showed little reaction following the announcement. Fed Chair Jerome Powell emphasized that the central bank remains committed to bringing inflation back to its 2% target.",
                aiSummary: "美联储周三维持利率不变，并暗示可能将利率维持在高位更长时间以继续对抗通胀。这一决定符合市场预期，市场反应平淡。美联储主席鲍威尔强调央行致力于将通胀率恢复到2%的目标。",
                time: "4小时前",
                category: "finance",
                sentiment: "neutral",
                importance: 8,
                aiProcessed: true,
                aiHighlight: true,
                similarSources: ["纽约时报", "BBC"],
                tags: ["货币政策", "经济政策", "通货膨胀"]
            },
            {
                id: 3,
                title: "全球气候峰会达成新协议，2050年碳中和目标获通过",
                source: "BBC新闻",
                sourceId: "bbc",
                originalContent: "World leaders at the Global Climate Summit have agreed on a new accord that sets a target of net-zero carbon emissions by 2050. The agreement, which was reached after two weeks of intense negotiations, includes commitments from developed countries to provide financial support to developing nations. Environmental groups have welcomed the deal but warn that immediate action is needed.",
                aiSummary: "全球气候峰会达成新协议，设定2050年实现碳中和目标。经过两周紧张谈判达成的协议包括发达国家向发展中国家提供财政支持的承诺。环保组织欢迎该协议，但警告需要立即采取行动。",
                time: "6小时前",
                category: "international",
                sentiment: "positive",
                importance: 9,
                aiProcessed: true,
                aiHighlight: true,
                similarSources: ["卫报", "纽约时报"],
                tags: ["气候变化", "国际协议", "环境保护"]
            },
            {
                id: 4,
                title: "特斯拉发布新一代电动汽车，续航突破800公里",
                source: "TechCrunch",
                sourceId: "techcrunch",
                originalContent: "Tesla unveiled its next-generation electric vehicle today, boasting a record-breaking range of over 800 kilometers on a single charge. The new model also features faster charging capabilities and an updated autonomous driving system. CEO Elon Musk said the vehicle represents a significant step forward in making sustainable transportation accessible to more people.",
                aiSummary: "特斯拉发布新一代电动汽车，单次充电续航突破800公里，创下新纪录。新车型还具备更快充电能力和更新的自动驾驶系统。马斯克称这款车是让更多人获得可持续交通的重要一步。",
                time: "8小时前",
                category: "tech",
                sentiment: "positive",
                importance: 7,
                aiProcessed: false,
                aiHighlight: false,
                similarSources: ["路透社"],
                tags: ["电动汽车", "技术创新", "可持续交通"]
            },
            {
                id: 5,
                title: "欧洲央行考虑进一步加息以应对通胀",
                source: "路透社",
                sourceId: "reuters",
                originalContent: "The European Central Bank is considering further interest rate hikes as inflation remains stubbornly high across the eurozone. According to sources familiar with the matter, policymakers are debating whether another increase is necessary at their next meeting. The eurozone's inflation rate has been above the ECB's target for over two years.",
                aiSummary: "欧洲央行考虑进一步加息以应对持续高企的通胀。熟悉情况的消息人士称，政策制定者正在辩论是否在下次会议上再次加息。欧元区通胀率已连续两年多高于欧洲央行目标。",
                time: "10小时前",
                category: "finance",
                sentiment: "neutral",
                importance: 7,
                aiProcessed: true,
                aiHighlight: false,
                similarSources: ["BBC"],
                tags: ["欧洲经济", "货币政策", "通货膨胀"]
            },
            {
                id: 6,
                title: "人工智能在医疗诊断领域取得突破性进展",
                source: "BBC新闻",
                sourceId: "bbc",
                originalContent: "Researchers have developed an AI system that can diagnose certain medical conditions with accuracy comparable to human experts. The technology, which was tested across multiple hospitals, showed promising results in early detection of diseases. Experts believe this could help address shortages of medical professionals in some regions.",
                aiSummary: "研究人员开发出AI系统，能以与人类专家相当的准确度诊断某些医疗状况。该技术在多家医院测试，在疾病早期检测方面显示出良好结果。专家认为这可能有助于解决部分地区医疗专业人员短缺问题。",
                time: "12小时前",
                category: "tech",
                sentiment: "positive",
                importance: 8,
                aiProcessed: false,
                aiHighlight: true,
                similarSources: ["纽约时报"],
                tags: ["医疗AI", "诊断技术", "医疗创新"]
            },
            {
                id: 7,
                title: "世界杯预选赛：多支强队提前晋级",
                source: "BBC新闻",
                sourceId: "bbc",
                originalContent: "Several top football nations have secured their spots in the upcoming World Cup following the latest round of qualifiers. The results have set the stage for what promises to be an exciting tournament next year. Fans are already anticipating high-stakes matches between traditional rivals.",
                aiSummary: "多支足球强队在最新一轮预选赛后已确保晋级即将到来的世界杯。这些结果为明年激动人心的赛事奠定了基础。球迷们已经开始期待传统对手之间的高风险比赛。",
                time: "1天前",
                category: "sports",
                sentiment: "positive",
                importance: 6,
                aiProcessed: false,
                aiHighlight: false,
                similarSources: [],
                tags: ["足球", "世界杯", "体育赛事"]
            },
            {
                id: 8,
                title: "好莱坞编剧罢工结束，新协议达成",
                source: "纽约时报",
                sourceId: "nytimes",
                originalContent: "The Hollywood writers' strike has come to an end after union leaders reached a tentative agreement with major studios. The deal includes higher pay and improved working conditions for writers, particularly regarding streaming media residuals. Production on many television shows and films is expected to resume soon.",
                aiSummary: "好莱坞编剧罢工结束，工会领导人与主要制片公司达成初步协议。协议包括提高编剧薪酬和改善工作条件，特别是在流媒体残值方面。许多电视节目和电影的制作预计将很快恢复。",
                time: "1天前",
                category: "entertainment",
                sentiment: "positive",
                importance: 5,
                aiProcessed: true,
                aiHighlight: false,
                similarSources: [],
                tags: ["娱乐产业", "劳资谈判", "流媒体"]
            }
        ];

        // 趋势话题数据
        const trendingTopics = [
            { id: 1, title: "AI模型性能突破", count: 42, category: "tech" },
            { id: 2, title: "全球货币政策调整", count: 38, category: "finance" },
            { id: 3, title: "气候变化协议进展", count: 35, category: "international" },
            { id: 4, title: "电动汽车技术创新", count: 28, category: "tech" },
            { id: 5, title: "医疗AI诊断应用", count: 24, category: "tech" }
        ];

        // 页面元素
        const rssSourceList = document.getElementById('rssSourceList');
        const newsGrid = document.getElementById('newsGrid');
        const trendingList = document.getElementById('trendingList');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const currentSourceTitle = document.getElementById('currentSourceTitle');
        const newsStats = document.getElementById('newsStats');
        const aiStats = document.getElementById('aiStats');
        const allCount = document.getElementById('allCount');
        const highlightCount = document.getElementById('highlightCount');
        const summaryCount = document.getElementById('summaryCount');
        const filterTabs = document.getElementById('filterTabs');
        const addSourceBtn = document.getElementById('addSourceBtn');
        const addRssModal = document.getElementById('addRssModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const generateSummaryBtn = document.getElementById('generateSummaryBtn');
        const refreshNewsBtn = document.getElementById('refreshNewsBtn');
        const summaryLengthSlider = document.getElementById('summaryLengthSlider');
        const sentimentSlider = document.getElementById('sentimentSlider');
        const importanceSlider = document.getElementById('importanceSlider');
        const summaryLengthValue = document.getElementById('summaryLengthValue');
        const sentimentValue = document.getElementById('sentimentValue');
        const importanceValue = document.getElementById('importanceValue');
        const applyAiSettings = document.getElementById('applyAiSettings');
        const rssUrlInput = document.getElementById('rssUrlInput');
        const rssUrlAddBtn = document.getElementById('rssUrlAddBtn');
        const customRssInput = document.getElementById('customRssInput');
        const customRssUrl = document.getElementById('customRssUrl');
        const addCustomRssBtn = document.getElementById('addCustomRssBtn');

        // 状态变量
        let currentSource = 'all';
        let currentCategory = 'all';
        let aiSettings = {
            summaryLength: 5,
            sentimentSensitivity: 7,
            importanceThreshold: 6
        };

        // 初始化页面
        function initPage() {
            // 加载RSS源列表
            loadRssSources();
            
            // 加载新闻数据
            loadNewsData();
            
            // 加载趋势话题
            loadTrendingTopics();
            
            // 更新统计数据
            updateStats();
            
            // 设置事件监听器
            setupEventListeners();
            
            // 初始化AI设置显示
            updateAiSettingsDisplay();
        }

        // 加载RSS源列表
        function loadRssSources() {
            rssSourceList.innerHTML = '';
            
            // 添加"全部"选项
            const allItem = document.createElement('li');
            allItem.className = 'rss-source-item active';
            allItem.setAttribute('data-source', 'all');
            allItem.innerHTML = `
                <div class="source-icon" style="background-color: #6366f1;">
                    <i class="fas fa-layer-group"></i>
                </div>
                <span class="source-name">全部聚合</span>
                <span class="source-count">${newsData.length}</span>
            `;
            rssSourceList.appendChild(allItem);
            
            // 添加各个RSS源
            rssSources.forEach(source => {
                if (!source.enabled) return;
                
                const sourceNewsCount = newsData.filter(news => news.sourceId === source.id).length;
                
                const sourceItem = document.createElement('li');
                sourceItem.className = 'rss-source-item';
                sourceItem.setAttribute('data-source', source.id);
                sourceItem.innerHTML = `
                    <div class="source-icon" style="background-color: ${source.color};">
                        <i class="fas fa-${source.icon}"></i>
                    </div>
                    <span class="source-name">${source.name}</span>
                    <span class="source-count">${sourceNewsCount}</span>
                `;
                rssSourceList.appendChild(sourceItem);
            });
            
            // 添加RSS源点击事件
            document.querySelectorAll('.rss-source-item').forEach(item => {
                item.addEventListener('click', function() {
                    const source = this.getAttribute('data-source');
                    selectSource(source, this);
                });
            });
            
            // 添加AI分类筛选点击事件
            document.querySelectorAll('[data-filter]').forEach(item => {
                item.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    applyAiFilter(filter, this);
                });
            });
        }

        // 选择新闻源
        function selectSource(source, element) {
            // 更新活动源样式
            document.querySelectorAll('.rss-source-item').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');
            
            // 更新当前源
            currentSource = source;
            
            // 更新页面标题
            if (source === 'all') {
                currentSourceTitle.textContent = '全部新闻聚合';
            } else {
                const sourceName = rssSources.find(s => s.id === source)?.name || '未知源';
                currentSourceTitle.textContent = `${sourceName} - 新闻聚合`;
            }
            
            // 重新加载新闻
            loadNewsData();
        }

        // 应用AI筛选
        function applyAiFilter(filter, element) {
            // 更新活动筛选样式
            document.querySelectorAll('[data-filter]').forEach(item => {
                item.classList.remove('active');
            });
            element.classList.add('active');
            
            // 应用筛选
            loadNewsData(filter);
        }

        // 加载新闻数据
        function loadNewsData(filter = null) {
            // 显示加载动画
            loadingSpinner.style.display = 'block';
            newsGrid.innerHTML = '';
            
            // 筛选新闻
            let filteredNews = [...newsData];
            
            // 按源筛选
            if (currentSource !== 'all') {
                filteredNews = filteredNews.filter(news => news.sourceId === currentSource);
            }
            
            // 按AI筛选
            if (filter === 'ai-highlight') {
                filteredNews = filteredNews.filter(news => news.aiHighlight);
            } else if (filter === 'ai-summary') {
                filteredNews = filteredNews.filter(news => news.aiProcessed);
            }
            
            // 按分类筛选
            if (currentCategory !== 'all') {
                filteredNews = filteredNews.filter(news => news.category === currentCategory);
            }
            
            // 按重要性阈值筛选
            filteredNews = filteredNews.filter(news => news.importance >= aiSettings.importanceThreshold);
            
            // 模拟网络延迟
            setTimeout(() => {
                // 清空新闻网格
                newsGrid.innerHTML = '';
                
                if (filteredNews.length === 0) {
                    newsGrid.innerHTML = `
                        <div style="text-align: center; padding: 60px 20px; color: var(--gray-color);">
                            <i class="fas fa-newspaper" style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;"></i>
                            <h3>未找到相关新闻</h3>
                            <p>尝试调整筛选条件或添加更多RSS源</p>
                        </div>
                    `;
                } else {
                    // 添加新闻卡片
                    filteredNews.forEach(news => {
                        const newsCard = createNewsCard(news);
                        newsGrid.appendChild(newsCard);
                    });
                    
                    // 添加淡入动画
                    const cards = document.querySelectorAll('.news-card');
                    cards.forEach((card, index) => {
                        card.classList.add('fade-in');
                        card.style.animationDelay = `${index * 0.1}s`;
                    });
                }
                
                // 隐藏加载动画
                loadingSpinner.style.display = 'none';
                
                // 更新统计数据
                updateStats();
            }, 500);
        }

        // 创建新闻卡片
        function createNewsCard(newsItem) {
            const source = rssSources.find(s => s.id === newsItem.sourceId);
            const sourceColor = source ? source.color : '#6366f1';
            
            // 根据情感选择标签颜色
            let sentimentColor = '#10b981'; // 默认积极
            let sentimentText = '积极';
            
            if (newsItem.sentiment === 'neutral') {
                sentimentColor = '#6b7280';
                sentimentText = '中性';
            } else if (newsItem.sentiment === 'negative') {
                sentimentColor = '#ef4444';
                sentimentText = '消极';
            }
            
            // 根据重要性选择标签
            let importanceText = '中';
            if (newsItem.importance >= 8) {
                importanceText = '高';
            } else if (newsItem.importance <= 5) {
                importanceText = '低';
            }
            
            const card = document.createElement('div');
            card.className = 'news-card';
            card.innerHTML = `
                <div class="news-card-header">
                    <div class="news-source-info">
                        <div class="news-source-logo" style="background-color: ${sourceColor};">
                            ${newsItem.source.substring(0, 2)}
                        </div>
                        <div>
                            <div class="news-source-name">${newsItem.source}</div>
                            <div class="news-source-time">${newsItem.time}</div>
                        </div>
                    </div>
                    <div class="ai-tags">
                        <span class="ai-tag category">${newsItem.category === 'tech' ? '科技' : 
                                                       newsItem.category === 'finance' ? '财经' : 
                                                       newsItem.category === 'international' ? '国际' : 
                                                       newsItem.category === 'sports' ? '体育' : 
                                                       newsItem.category === 'entertainment' ? '娱乐' : '其他'}</span>
                        ${newsItem.aiProcessed ? `<span class="ai-tag sentiment" style="background-color: ${sentimentColor}20; color: ${sentimentColor};">${sentimentText}情绪</span>` : ''}
                        <span class="ai-tag importance">重要性: ${importanceText}</span>
                        ${newsItem.aiHighlight ? `<span class="ai-tag category" style="background-color: #fef3c7; color: #d97706;">AI重点</span>` : ''}
                    </div>
                </div>
                <div class="news-card-content">
                    <h3 class="news-title">${newsItem.title}</h3>
                    <div class="news-original-content">
                        ${newsItem.originalContent}
                    </div>
                    ${newsItem.aiProcessed ? `
                    <div class="ai-summary-box">
                        <div class="ai-summary-header">
                            <i class="fas fa-robot"></i>
                            AI智能摘要 (${aiSettings.summaryLength}/10)
                        </div>
                        <div class="ai-summary-text">
                            ${newsItem.aiSummary}
                        </div>
                    </div>
                    ` : ''}
                </div>
                <div class="news-card-footer">
                    <div class="news-actions">
                        <div class="news-action" onclick="toggleReadStatus(${newsItem.id})">
                            <i class="far fa-bookmark"></i>
                            稍后阅读
                        </div>
                        <div class="news-action" onclick="generateSummaryForNews(${newsItem.id})">
                            <i class="fas fa-robot"></i>
                            ${newsItem.aiProcessed ? '重新摘要' : '生成摘要'}
                        </div>
                        <div class="news-action" onclick="shareNews(${newsItem.id})">
                            <i class="fas fa-share-alt"></i>
                            分享
                        </div>
                    </div>
                    ${newsItem.similarSources && newsItem.similarSources.length > 0 ? `
                    <div class="similar-sources">
                        同主题来源: <span>${newsItem.similarSources.join(', ')}</span>
                    </div>
                    ` : ''}
                </div>
            `;
            
            return card;
        }

        // 加载趋势话题
        function loadTrendingTopics() {
            trendingList.innerHTML = '';
            
            trendingTopics.forEach((topic, index) => {
                const listItem = document.createElement('li');
                listItem.className = 'trending-item';
                listItem.innerHTML = `
                    <div class="trending-rank">${index + 1}</div>
                    <div class="trending-content">
                        <h4>${topic.title}</h4>
                        <div class="trending-meta">
                            <i class="fas fa-newspaper"></i>
                            <span>${topic.count} 篇相关报道</span>
                            <span style="margin-left: 10px; padding: 2px 8px; background-color: #f1f5f9; border-radius: 10px; font-size: 11px;">
                                ${topic.category === 'tech' ? '科技' : 
                                 topic.category === 'finance' ? '财经' : 
                                 topic.category === 'international' ? '国际' : '其他'}
                            </span>
                        </div>
                    </div>
                `;
                trendingList.appendChild(listItem);
            });
        }

        // 更新统计数据
        function updateStats() {
            const totalNews = newsData.length;
            const aiHighlightNews = newsData.filter(news => news.aiHighlight).length;
            const aiSummaryNews = newsData.filter(news => news.aiProcessed).length;
            
            // 更新侧边栏计数
            allCount.textContent = totalNews;
            highlightCount.textContent = aiHighlightNews;
            summaryCount.textContent = aiSummaryNews;
            
            // 更新主区域统计
            const filteredNews = getFilteredNewsCount();
            newsStats.textContent = `共 ${filteredNews} 条新闻`;
            
            // 更新AI处理统计
            const aiProcessedCount = newsData.filter(news => news.aiProcessed).length;
            const aiPercentage = Math.round((aiProcessedCount / totalNews) * 100);
            aiStats.textContent = `AI已处理 ${aiProcessedCount} 条 (${aiPercentage}%)`;
        }

        // 获取筛选后新闻数量
        function getFilteredNewsCount() {
            let filteredNews = [...newsData];
            
            if (currentSource !== 'all') {
                filteredNews = filteredNews.filter(news => news.sourceId === currentSource);
            }
            
            if (currentCategory !== 'all') {
                filteredNews = filteredNews.filter(news => news.category === currentCategory);
            }
            
            return filteredNews.length;
        }

        // 更新AI设置显示
        function updateAiSettingsDisplay() {
            // 更新滑块值显示
            const summaryText = aiSettings.summaryLength <= 3 ? '简短' : 
                               aiSettings.summaryLength <= 7 ? '中等' : '详细';
            summaryLengthValue.textContent = `${summaryText} (${aiSettings.summaryLength}/10)`;
            
            const sentimentText = aiSettings.sentimentSensitivity <= 3 ? '低敏感度' : 
                                 aiSettings.sentimentSensitivity <= 7 ? '中敏感度' : '高敏感度';
            sentimentValue.textContent = `${sentimentText} (${aiSettings.sentimentSensitivity}/10)`;
            
            const importanceText = aiSettings.importanceThreshold <= 3 ? '低' : 
                                  aiSettings.importanceThreshold <= 7 ? '中' : '高';
            importanceValue.textContent = `${importanceText}重要性 (${aiSettings.importanceThreshold}/10)`;
            
            // 设置滑块值
            summaryLengthSlider.value = aiSettings.summaryLength;
            sentimentSlider.value = aiSettings.sentimentSensitivity;
            importanceSlider.value = aiSettings.importanceThreshold;
        }

        // 设置事件监听器
        function setupEventListeners() {
            // 分类标签点击事件
            filterTabs.querySelectorAll('.filter-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // 更新活动标签样式
                    filterTabs.querySelectorAll('.filter-tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    this.classList.add('active');
                    
                    // 更新当前分类
                    currentCategory = this.getAttribute('data-category');
                    
                    // 重新加载新闻
                    loadNewsData();
                });
            });
            
            // 添加RSS源按钮
            addSourceBtn.addEventListener('click', function() {
                addRssModal.style.display = 'flex';
            });
            
            // 关闭模态框
            closeModalBtn.addEventListener('click', function() {
                addRssModal.style.display = 'none';
                customRssInput.style.display = 'none';
            });
            
            // 点击模态框外部关闭
            addRssModal.addEventListener('click', function(e) {
                if (e.target === addRssModal) {
                    addRssModal.style.display = 'none';
                    customRssInput.style.display = 'none';
                }
            });
            
            // 预设RSS源选择
            document.querySelectorAll('.rss-source-option').forEach(option => {
                option.addEventListener('click', function() {
                    const source = this.getAttribute('data-source');
                    
                    if (source === 'custom') {
                        customRssInput.style.display = 'block';
                    } else {
                        // 模拟添加预设源
                        alert(`已添加 ${this.querySelector('h4').textContent} RSS源`);
                        addRssModal.style.display = 'none';
                    }
                });
            });
            
            // 添加自定义RSS源
            addCustomRssBtn.addEventListener('click', function() {
                const url = customRssUrl.value.trim();
                if (url) {
                    alert(`已添加自定义RSS源: ${url}`);
                    addRssModal.style.display = 'none';
                    customRssInput.style.display = 'none';
                    customRssUrl.value = '';
                } else {
                    alert('请输入有效的RSS URL');
                }
            });
            
            // 生成AI摘要按钮
            generateSummaryBtn.addEventListener('click', function() {
                // 模拟AI处理
                loadingSpinner.style.display = 'block';
                
                setTimeout(() => {
                    // 为未处理的新闻生成摘要
                    newsData.forEach(news => {
                        if (!news.aiProcessed) {
                            news.aiProcessed = true;
                            // 模拟AI生成的摘要
                            news.aiSummary = `这是AI生成的摘要示例，摘要长度设置为${aiSettings.summaryLength}/10。原文内容关于"${news.title}"。`;
                        }
                    });
                    
                    // 重新加载新闻
                    loadNewsData();
                    
                    alert('AI摘要生成完成！已为所有新闻生成智能摘要。');
                }, 1500);
            });
            
            // 刷新新闻按钮
            refreshNewsBtn.addEventListener('click', function() {
                // 模拟刷新新闻
                loadingSpinner.style.display = 'block';
                
                setTimeout(() => {
                    // 这里可以添加实际从FreeRSS获取新闻的逻辑
                    alert('新闻已刷新！从RSS源获取了最新内容。');
                    loadNewsData();
                }, 1000);
            });
            
            // AI设置滑块事件
            summaryLengthSlider.addEventListener('input', function() {
                aiSettings.summaryLength = parseInt(this.value);
                updateAiSettingsDisplay();
            });
            
            sentimentSlider.addEventListener('input', function() {
                aiSettings.sentimentSensitivity = parseInt(this.value);
                updateAiSettingsDisplay();
            });
            
            importanceSlider.addEventListener('input', function() {
                aiSettings.importanceThreshold = parseInt(this.value);
                updateAiSettingsDisplay();
            });
            
            // 应用AI设置按钮
            applyAiSettings.addEventListener('click', function() {
                // 重新加载新闻以应用新设置
                loadNewsData();
                alert('AI设置已应用！');
            });
            
            // 通过URL添加RSS源
            rssUrlAddBtn.addEventListener('click', function() {
                const url = rssUrlInput.value.trim();
                if (url) {
                    alert(`已添加RSS源: ${url}\nAI将开始分析该源的内容。`);
                    rssUrlInput.value = '';
                } else {
                    alert('请输入有效的RSS URL');
                }
            });
        }

        // 新闻相关功能函数
        function toggleReadStatus(newsId) {
            const newsItem = newsData.find(news => news.id === newsId);
            if (newsItem) {
                alert(`已${newsItem.bookmarked ? '移除' : '添加'}稍后阅读: "${newsItem.title}"`);
                newsItem.bookmarked = !newsItem.bookmarked;
            }
        }

        function generateSummaryForNews(newsId) {
            const newsItem = newsData.find(news => news.id === newsId);
            if (newsItem) {
                // 模拟AI生成摘要
                loadingSpinner.style.display = 'block';
                
                setTimeout(() => {
                    newsItem.aiProcessed = true;
                    newsItem.aiSummary = `这是AI为"${newsItem.title}"生成的智能摘要，基于当前摘要长度设置(${aiSettings.summaryLength}/10)。摘要内容模拟了AI对原文关键信息的提取和重组。`;
                    
                    // 重新加载新闻
                    loadNewsData();
                    loadingSpinner.style.display = 'none';
                    
                    alert(`已为"${newsItem.title}"生成AI摘要`);
                }, 800);
            }
        }

        function shareNews(newsId) {
            const newsItem = newsData.find(news => news.id === newsId);
            if (newsItem) {
                // 模拟分享功能
                const shareText = `分享新闻: ${newsItem.title}\n${newsItem.aiSummary || newsItem.originalContent.substring(0, 100)}...`;
                alert(shareText);
                
                // 实际应用中这里可以调用Web Share API
                if (navigator.share) {
                    navigator.share({
                        title: newsItem.title,
                        text: newsItem.aiSummary || newsItem.originalContent.substring(0, 100),
                        url: window.location.href
                    });
                }
            }
        }

        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>